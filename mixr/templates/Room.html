<!DOCTYPE html>
<html>
<link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css">
<head>
    {% block javascript %}
    <script
        src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        $(function () {
            $('#query').keyup(function () {
                $.ajax({
                    type: 'GET',
                    url: '/search/{{code}}/' + $('#query').val(),
                    success: function (newData) {
                        document.getElementById("songs").innerHTML = newData
                    }
                })
            })
            setInterval(function () {
                $.ajax({
                    type: 'GET',
                    url: '/getsongs/{{code}}/{{host}}',
                    success: function (newData) {
                        document.getElementById("added").innerHTML = newData
                    }
                })
            }, 1000)
        })
    </script>
    {% endblock %}
    <style>
        html {
            height: 150%;
            width: 100%;
        }

        body {
            height: 150%;
            background-color: rgb(26, 26, 29);
        }

        .title {
            color: green;
            margin: auto;
            justify-content: center;
            text-align: center;
        }
        .input {
                background: rgb(26, 52, 78);
                font-family: Georgia, serif;
                color: white;
            }
        
    </style>
</head>

<body>

    <div class="columns">
        <div class="column is-one-third"></div>
        <div class="column">
            <br>
            <h2 class="title is-1">Room </h2>
            <h2 class="title is-3">{{code}}</h2>
        <br>
        <h2 style="text-align: center; color: honeydew;" class="subtitle">Add Songs</h2>
        <br>
        <form method="POST">
            {%csrf_token%}
            <input id="query" type="text" onkeyup="" placeholder="Search..."
                class="input is-success" />
        </form>

        <br>

        <ul id="songs" class="menu-list">
            {% for song in songs.values %}
            <li><a>{{song}}</a></li>
            {% endfor %}
        </ul>

        <br />
        <h2 style="text-align: center; color: honeydew;" class="subtitle">Added Songs</h2>
    <ul id="added">
    </ul>
    <br>
    <br>
    <div>
        <button class="button is-success" style="position: absolute;
        left: 50%;
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);"><a
                href="https://open.spotify.com/playlist/{{playlist}}"
                target="_blank" class="link">View Playlist in
                Spotify</a></button>
    </div>
        </div>
        <div class="column"></div>
    </div>

   
    <!-- in order to use jQueries vv -->
    
    
</body>
</html>